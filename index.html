<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body>
    <model-viewer id="model-viewer" class="flex items-center justify-center h-screen w-screen bg-gray-100"
                  alt="My 3D Model"
                  shadow-intensity="1"
                  camera-controls
                  touch-action="pan-y">
    </model-viewer>

    <script>
        // Function to get the URL parameter
        function getUrlParameter(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Get the srcUrl parameter value
        const srcUrl = getUrlParameter('srcUrl');

        // Get the model-viewer element
        const modelViewer = document.getElementById('model-viewer');

        // Check if srcUrl is provided
        if (srcUrl) {
            // Encode the URL to avoid any issues with special characters
            const encodedSrcUrl = encodeURIComponent(srcUrl);

            // Debugging - Log the URLs
            console.log('Original srcUrl:', srcUrl);
            console.log('Encoded srcUrl:', encodedSrcUrl);

            // Set the src attribute of the model-viewer element
            modelViewer.setAttribute('src', decodeURIComponent(encodedSrcUrl));
        } else {
            // Handle cases where srcUrl is not provided
            console.error('No srcUrl parameter provided in the URL.');
            modelViewer.setAttribute('src', './assets/armchair.glb'); // Set a default GLB file
        }
    </script>
</body>
</html>
